# Self-Hosted Scheduling Tool  
**Product Requirements Document (PRD)**

**Version**: 0.9

## 1. Product intent

### 1.1 Purpose
Build a **self-hosted scheduling system** that allows external users to book meetings based on a host’s real availability across **multiple calendars**, with **automatic video-conference creation**, and minimal operational cost.

The product replaces **Cal.com / Calendly / Fantastical Openings** for individuals first, and supports **multi-tenant self-registration** from day one.

### 1.2 Non-goals (explicit)
- No payments (yet, maybe in future)
- No CRM, Slack, Zapier, webhooks
- No analytics or reporting dashboards (future)
- No smart scheduling heuristics
- No SSO / MFA (future)
- No team round-robin (future)

—

## 2. Target users & tenancy

### 2.1 User types
| Role | Description |
|-—|-—|
| **Host** | Owns calendars, meeting templates, availability |
| **Invitee** | External person booking a meeting |
| **Tenant Admin** | First registered host in a tenant |

> Delegates, assistants, and teams are **out of scope**, but the data model must not block them later.

### 2.2 Multi-tenancy
- **Hard multi-tenant isolation**
- Each tenant has:
  - Its own users
  - Its own meeting templates
  - Its own OAuth credentials (calendar + conferencing)
- Single deployment, multiple tenants

—

## 3. Core objects (domain model)

### 3.1 Host
- Email (primary identifier)
- Timezone (can be modified)
- Default calendar
- Connected calendars (many)
- Connected conferencing providers
- Tenant ID

### 3.2 Calendar connection
- Provider (Google, iCloud, CalDAV)
- OAuth / credentials
- Read busy times
- Write events

### 3.3 Meeting template (central concept)
A **template defines everything** about how a meeting can be booked.

Fields:
- Name (public)
- Description (public)
- Duration(s) allowed (one or more)
- Approval required (boolean)
- Location type:
  - Google Meet
  - Zoom
  - Phone
  - Physical/custom (text or link)
- Calendar to write event to
- Availability rules (see below)
- Invitee questions (schema)
- Email templates
- Active / inactive

### 3.4 Booking
- Template ID
- Host ID
- Invitee info
- Selected slot
- Status:
  - Pending approval
  - Confirmed
  - Cancelled
- Conference link
- Calendar event ID(s)

—

## 4. Calendar support

### 4.1 Supported providers (phase 1)
- Google Calendar
- iCloud
- Generic CalDAV

### 4.2 Behavior
- **Read**: busy times only
- **Write**: confirmed bookings only
- No two-way editing sync
- If calendar event is modified externally:
  - Booking is **not updated**
  - This is explicitly accepted behavior

### 4.3 Multiple calendars
- Host may connect multiple calendars
- All connected calendars are checked for **busy time**
- **One designated calendar** per meeting template receives the created event

—

## 5. Availability & scheduling rules

### 5.1 Availability resolution order
1. Template availability rules
2. Host working hours
3. Calendar busy blocks
4. Lead / buffer times

### 5.2 Scheduling horizon
- Per template:
  - Earliest bookable time (e.g. “now”)
  - Latest bookable time (e.g. 14 days)
- Global hard limit: **90 days**

### 5.3 Duration
- Defined per template
- Single or multiple fixed durations (e.g. 30 / 60)

### 5.4 Buffer & lead times
- Configurable per template:
  - Minimum notice
  - Pre-meeting buffer
  - Post-meeting buffer

### 5.5 Working hours
- Defined at host level
- Can be overridden or restricted per template
- Supports:
  - Allowed weekdays
  - Allowed time ranges within a day (e.g. Thu: 09:00-11:30, 14:00-17:30)

### 5.6 Timezone handling
- Invitee timezone auto-detected
- Display availability in invitee timezone
- Stored internally in UTC

—

## 6. Booking flows

### 6.1 Supported booking types
- 1:1 meetings
- 1 host + multiple invitees

### 6.2 Approval flow (default)
1. Invitee selects time
2. Booking enters **Pending**
3. Host receives email
4. Host approves
5. Event is created
6. Invitations are sent

> Auto-approval is configurable per template.

### 6.3 Invitee questions
- Name
- Email
- Free-text agenda/meeting subject
- Optional list of emails to add to the invitation
- Optional phone number

—

## 7. Reschedule & cancellation

### 7.1 Invitee actions
- Invitee can:
  - Cancel
  - Reschedule (implemented as cancel + new booking)
- Via secure link in email

### 7.2 Constraints
- No cancellation windows
- No no-show tracking

—

## 8. Conferencing & location

### 8.1 Supported providers (phase 1)
- Google Meet
- Zoom
- Phone (manual entry)
- Alternate provider (manual entry)

### 8.2 Behavior
- Conference link auto-created on approval
- Stored in booking and calendar event
- Provider chosen per meeting template

—

## 9. Notifications & emails

### 9.1 Channels (phase 1)
- Email only

### 9.2 Events
- Booking requested
- Booking approved
- Booking cancelled
- Booking rescheduled

### 9.3 Templates
- Editable per meeting template
- Plain text + basic HTML
- Include:
  - Time
  - Location / link
  - Reschedule / cancel link

### 9.4 Calendar invites
- `.ics` attachment
- Sent on confirmation only

—

## 10. Public pages & routing

### 10.1 Public URLs
- `/tenant/{host}`
- `/tenant/{host}/{template}`

### 10.2 Characteristics
- SEO irrelevant
- No branding customization
- No embed widgets

—

## 11. Security & privacy (minimal viable)

- HTTPS enforced (via Caddy)
- Per-tenant isolation
- Basic audit log:
  - Template created/edited
  - Booking created/approved/cancelled
- No GDPR tooling yet

—

## 12. Deployment & ops

### 12.1 Stack
- Backend: **Go**
- Frontend: **HTMX + minimal JS**
- Styling: custom CSS
- DB: PostgreSQL (implied, not constrained)

### 12.2 Infrastructure
- DigitalOcean droplet
- Single service initially
- Reverse proxy: Caddy
- Mail: Mailgun

### 12.3 Backups
- Daily automated DB backups
- Manual restore acceptable

—

## 13. Explicit future extensions (designed-for, not built)

- Paid bookings (Stripe)
- Delegates / assistants
- Round-robin / pooled hosts
- Calendar edit detection
- Messaging notifications
- Custom domains
- SSO / MFA
- Webhooks & API
- Reporting
- Notifications via messengers (WhatsApp, Telegram, Slack)

—

## 14. MVP acceptance criteria

The product is “done” when:
- A host can self-register
- Connect Google / iCloud calendars
- Create a meeting template
- Share a public link
- An external user can request a meeting
- Host approves
- Calendar event + Meet/Zoom link is created
- Emails are sent correctly
- Everything runs self-hosted
